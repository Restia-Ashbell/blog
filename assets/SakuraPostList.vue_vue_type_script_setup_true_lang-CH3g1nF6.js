import{d as k,q as v,m as $,o as a,c as u,b as _,w as h,g as m,F as S,r as b,i as T,t as C,n as I,h as y,s as D,a as O,v as L,x as R,y as V,e as x,_ as w,f as M,z as B,A as j,B as q,C as X,D as Y,T as H}from"./app-z77uS6Ys.js";import{_ as U}from"./SakuraDate.vue_vue_type_script_setup_true_lang-C_zB8gZo.js";const G={class:"pagination"},W=y("div",{"i-ri-arrow-left-s-line":""},null,-1),J=y("div",{"i-ri-arrow-right-s-line":""},null,-1),K=k({__name:"ValaxyPagination",props:{curPage:{},total:{},pageSize:{}},emits:["pageChange"],setup(g,{emit:t}){const e=g,i=t,c=v(()=>Math.ceil(e.total/e.pageSize)),r=v(()=>e.curPage===1||e.curPage===c.value?3:2);function f(n){return n===1||n===c.value?!0:n>e.curPage-r.value&&n<e.curPage+r.value}function p(n){return i("pageChange",n),n===1?"/":`/page/${n}`}return(n,d)=>{const o=$("RouterLink");return a(),u("nav",G,[n.curPage!==1?(a(),_(o,{key:0,class:"page-number",to:p(n.curPage-1),"aria-label":"prev"},{default:h(()=>[W]),_:1},8,["to"])):m("v-if",!0),(a(!0),u(S,null,b(c.value,s=>(a(),u(S,null,[f(s)?(a(),_(o,{key:s,class:I(["page-number",n.curPage===s&&"active"]),to:p(s)},{default:h(()=>[T(C(s),1)]),_:2},1032,["class","to"])):s===n.curPage-r.value?(a(),u("span",{key:`prev-space-${s}`,class:"space",disabled:""}," ... ")):s===n.curPage+r.value?(a(),u("span",{key:`next-space-${s}`,class:"space",disabled:""}," ... ")):m("v-if",!0)],64))),256)),n.curPage!==c.value?(a(),_(o,{key:1,class:"page-number",to:p(n.curPage+1),"aria-label":"next"},{default:h(()=>[J]),_:1},8,["to"])):m("v-if",!0)])}}}),Q={class:"load-more-container flex justify-center mt-20 mb-17"},Z={key:1,class:"text-center"},ee=k({__name:"SakuraPagination",props:{total:{},pageSize:{}},setup(g){const t=g,e=D(),i=O(),c=L(Math.ceil(t.total/t.pageSize));function r(){var d,o,s;e.loadMultiple<c.value&&(e.loadMultiple+=1,((d=i.value.pagination)!=null&&d.animation||(s=(o=i.value.pagination)==null?void 0:o.infiniteScrollOptions)!=null&&s.preload)&&p())}function f(d,o){d.forEach(s=>{var l,z,P;s.isIntersecting&&!s.target.classList.contains("element-slide-fade-in")&&((l=i.value.pagination)!=null&&l.animation&&s.target.classList.add("element-slide-fade-in"),e.paginationElementPositionsNumber+=1,e.paginationElementPositionsNumber===e.paginationTargets.length-1&&((P=(z=i.value.pagination)==null?void 0:z.infiniteScrollOptions)!=null&&P.preload)&&r())})}function p(){setTimeout(()=>{var d;e.paginationTargets=Array.from(document.querySelectorAll(".article-card"));for(let o=0;o<e.paginationTargets.length;o++)o>=e.paginationElementPositionsNumber&&((d=i.value.pagination)!=null&&d.animation&&e.paginationTargets[o].classList.add("op-0"),e.paginationObserver.observe(e.paginationTargets[o]))},0)}function n(){e.paginationTargets.forEach(d=>{var o;(o=e.paginationObserver)==null||o.unobserve(d)})}return R(()=>{var d,o,s,l;((d=i.value.pagination)!=null&&d.animation||(s=(o=i.value.pagination)==null?void 0:o.infiniteScrollOptions)!=null&&s.preload)&&(e.paginationTargets.length===0&&(e.paginationObserver=new IntersectionObserver(f,{threshold:((l=i.value.pagination.infiniteScrollOptions)==null?void 0:l.threshold)??.01})),p())}),V(()=>{n()}),(d,o)=>(a(),u("nav",Q,[x(e).loadMultiple<c.value?(a(),u("button",{key:0,class:"load-more-button px-8 py-2",onClick:r}," Previous ")):(a(),u("div",Z," 很高兴你翻到这里，但是真的没有了... "))]))}}),te={class:"tags"},ae={key:0,class:"mr-1","i-mdi-tag-multiple":""},ne={key:1,class:"mx-1 non-hoverable"},oe=k({__name:"SakuraPostTags",props:{tags:{}},setup(g){return(t,e)=>{const i=$("RouterLink");return a(),u("div",te,[(a(!0),u(S,null,b(t.tags,(c,r)=>(a(),_(i,{key:c,to:{path:"/tags/",query:{tag:c}},class:"inline-flex items-center align-top"},{default:h(()=>[r===0?(a(),u("div",ae)):m("v-if",!0),r>0?(a(),u("span",ne,"·")):m("v-if",!0),T(" "+C(c),1)]),_:2},1032,["to"]))),128))])}}}),se=w(oe,[["__scopeId","data-v-d38e2f44"]]),ie={class:"categories"},re={key:0,class:"mr-1","i-mdi-folder-open-outline":""},le={key:1,class:"mx-1"},ue=k({__name:"SakuraPostCategories",props:{categories:{}},setup(g){const t=g,e=v(()=>typeof t.categories=="string"?[t.categories]:t.categories);return(i,c)=>{const r=$("RouterLink");return a(),u("div",ie,[(a(!0),u(S,null,b(e.value,(f,p)=>(a(),_(r,{key:p,to:{path:"/categories",query:{category:Array.isArray(i.categories)?i.categories.join("/"):i.categories}},class:"inline-flex items-center align-top"},{default:h(()=>[p===0?(a(),u("div",re)):m("v-if",!0),p>0?(a(),u("span",le,"/")):m("v-if",!0),T(" "+C(f),1)]),_:2},1032,["to"]))),128))])}}}),ce=w(ue,[["__scopeId","data-v-6a3df774"]]),pe=["src"],ge=k({__name:"SakuraImageCard",props:{src:String,to:String,scale:{type:[Number,String],default:1.2},rotate:{type:[Number,String],default:0},skewX:{type:[Number,String],default:0},skewY:{type:[Number,String],default:0},opacity:{type:[Number,String],default:1},translateX:{type:[Number,String],default:0},translateY:{type:[Number,String],default:0},transitionDuration:{type:String,default:"0.4s"},transitionTimingFunction:{type:String,default:"ease"},overlay:{type:Boolean,default:!1}},setup(g){const t=g,e=L(!1),i=v(()=>e.value?{transform:`scale(${t.scale}) rotate(${t.rotate}deg) skew(${t.skewX}deg, ${t.skewY}deg) translate(${t.translateX}px, ${t.translateY}px)`,opacity:t.opacity,transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`}:{transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`});return(c,r)=>{const f=$("RouterLink");return a(),u("div",{class:"overflow-hidden relative",onMouseover:r[0]||(r[0]=p=>e.value=!0),onMouseleave:r[1]||(r[1]=p=>e.value=!1)},[M(f,{to:t.to||"","aria-label":"Go to Post",class:I({"cursor-default":!t.to})},{default:h(()=>[y("img",{class:"lazy object-cover h-full w-full",src:t.src,alt:"cover",style:B(i.value)},null,12,pe),g.overlay?(a(),u("div",{key:0,class:"overlay",style:B({opacity:e.value?1:0})},null,4)):m("v-if",!0)]),_:1},8,["to","class"])],32)}}}),de=w(ge,[["__scopeId","data-v-829552b4"]]),me=g=>(j("data-v-d41952fd"),g=g(),q(),g),fe={class:"m-4"},_e={class:"font-secondary","inline-flex":"","items-center":""},ve=me(()=>y("div",{"i-mdi:clock-outline":"",class:"mr-1"},null,-1)),ye={class:"title my-2"},he=["innerHTML"],ke={class:"inline-flex"},Se=k({__name:"SakuraArticleCard",props:{post:{},imagePosition:{type:Boolean}},setup(g){const t=L(!0);return R(()=>{t.value=!1}),(e,i)=>{const c=de,r=U,f=$("RouterLink"),p=ce,n=se;return t.value?m("v-if",!0):(a(),u("article",{key:0,class:I(e.imagePosition&&e.post.cover&&"flex-row-reverse"||e.post.cover&&"md:text-right")},[e.post.cover?(a(),_(c,{key:0,class:"<md:rounded-3 h-230px md:w-430px",to:e.post.path,src:e.post.cover,rotate:"5",space:"1.1","transition-duration":"0.45s"},null,8,["to","src"])):m("v-if",!0),y("div",fe,[y("div",_e,[ve,T(" 发布于 "),M(r,{date:e.post.date},null,8,["date"])]),M(f,{to:e.post.path||"","aria-label":`Read more about ${e.post.title}`},{default:h(()=>[y("div",ye,C(e.post.title),1),y("div",{class:"mb-3 text-[var(--st-c-text-secondary)] dark:text-[var(--st-c-text-secondary)]",innerHTML:e.post.excerpt},null,8,he)]),_:1},8,["to","aria-label"]),y("div",ke,[e.post.categories?(a(),_(p,{key:0,class:"font-secondary mr-3",categories:e.post.categories},null,8,["categories"])):m("v-if",!0),e.post.tags?(a(),_(n,{key:1,class:"font-secondary",tags:e.post.tags},null,8,["tags"])):m("v-if",!0)])])],2))}}}),$e=w(Se,[["__scopeId","data-v-d41952fd"]]),Pe={key:0},Ce=k({__name:"SakuraPostList",props:{type:{},posts:{},curPage:{default:1}},setup(g){const t=g,e=X(),i=Y(),c=O(),r=D(),f=v(()=>{var l;return((l=c.value.pagination)==null?void 0:l.itemsPerPage)||i.value.pageSize}),p=v(()=>{var l;return((l=c.value.pagination)==null?void 0:l.type)||"infinite-scroll"}),n=v(()=>(t.posts||e.postList).filter(l=>!l.hide)),d=v(()=>n.value.slice((t.curPage-1)*f.value,t.curPage*f.value*r.loadMultiple)),o=v(()=>d.value.map(l=>l.tags&&l.tags.length>3?{...l,tags:l.tags.slice(0,3)}:l)),s=L(!0);return R(()=>{s.value=!1}),(l,z)=>{const P=$e,F=ee,E=K;return s.value?m("v-if",!0):(a(),u("div",Pe,[(a(!0),u(S,null,b(o.value,(N,A)=>(a(),_(H,{key:N.path,name:"fade"},{default:h(()=>[N?(a(),_(P,{key:0,id:`article-card-${A}`,class:"article-card","image-position":A%2===1,post:N},null,8,["id","image-position","post"])):m("v-if",!0)]),_:2},1024))),128)),p.value==="infinite-scroll"?(a(),_(F,{key:0,"page-size":f.value,total:n.value.length},null,8,["page-size","total"])):m("v-if",!0),p.value==="pagination"?(a(),_(E,{key:1,"cur-page":l.curPage,"page-size":f.value,total:n.value.length},null,8,["cur-page","page-size","total"])):m("v-if",!0)]))}}});export{de as _,Ce as a};
